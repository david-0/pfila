<div *ngIf="!groupEditOpen && !subgroupEditOpen" div class="group-subgroup-container">
  <div class="div--grow">
    <div class="div__header div--maxwith">
      <h3 class="h3__small-margins">Ortsgruppen</h3>
      <span class="fill-remaining-space"></span>
      <button mat-button class="grayButton" (click)="createGroup()">
        <mat-icon>add</mat-icon>
        <span class="size-xl">erstellen</span></button>
    </div>
    <div class="div--maxwith div--margins">
      <div class="line" *ngFor="let group of groups.getValue()">
        <button mat-button class="grayButton" (click)="editGroup(group)">
          <mat-icon>edit</mat-icon>
          <span class="size-xl">ändern</span></button>
        <button mat-button class="grayButton"
                (click)="openGroupDialog(group.id, group.name)">
          <mat-icon>delete</mat-icon>
          <span class="size-xl">löschen</span></button>
        <span
          class="span__gray" (click)="showGroupDetails(group)">{{group.name}}</span>
      </div>
    </div>
  </div>
  <div *ngIf="selectedGroup" class="div--grow">
    <div class="div__header div--maxwith">
      <h3 class="h3__small-margins">Gruppen in {{selectedGroup.name}}</h3>
      <span class="fill-remaining-space"></span>
      <button mat-button class="grayButton" (click)="createSubroup()">
        <mat-icon>add</mat-icon>
        <span class="size-xl">erstellen</span></button>
    </div>
    <div class="div--margins div--maxwith">
      <div class="line" *ngFor="let subgroup of selectedGroup.subgroups">
        <button mat-button class="grayButton" (click)="editSubgroup(subgroup)">
          <mat-icon>edit</mat-icon>
          <span class="size-xl">ändern</span></button>
        <button mat-button class="grayButton"
                (click)="openSubgroupDialog(subgroup.id, subgroup.name)">
          <mat-icon>delete</mat-icon>
          <span class="size-xl">löschen</span></button>
        <span
          class="span__gray">{{subgroup.name}}</span>
      </div>
    </div>
  </div>
</div>
<div *ngIf="groupEditOpen">
  <form class="form" #f="ngForm" novalidate (ngSubmit)="saveGroup(f.value)">
    <div class="div__header">
      <h3 class="h3__small-margins">{{detailHeader}}</h3>
      <span class="fill-remaining-space"></span>
      <button mat-button class="size-xs transparentButton" (click)="cancel()">
        <mat-icon>undo</mat-icon>
        <span class="size-xl"></span></button>
      <button mat-button type="submit" class="size-xs transparentButton">
        <mat-icon>save</mat-icon>
        <span class="size-xl"></span></button>
    </div>
    <div class="div--font div--maxwith500 div--margins">
      <section class="section">
        <mat-form-field class="full-width">
          <input matInput placeholder="Name" name="name" required
                 #groupnameControl="ngModel" [ngModel]="groupname">
          <mat-hint *ngIf="!groupnameControl.valid" [ngStyle]="{'color': 'red'}" align="start">erforderlich
          </mat-hint>
        </mat-form-field>
      </section>
    </div>
    <div class="button-row size-xl">
      <span class="fill-remaining-space"></span>
      <button mat-button class="grayButton" (click)="cancel()">
        <mat-icon>undo</mat-icon>
        Abbrechen
      </button>
      <button mat-button type="submit" [disabled]="!f.valid" class="grayButton">
        <mat-icon>save</mat-icon>
        Speichern
      </button>
    </div>
  </form>
</div>
<div *ngIf="subgroupEditOpen">
  <form class="form" #f="ngForm" novalidate (ngSubmit)="saveSubgroup(f.value)">
    <div class="div__header">
      <h3 class="h3__small-margins">{{detailHeader}}</h3>
      <span class="fill-remaining-space"></span>
      <button mat-button class="size-xs transparentButton" (click)="cancel()">
        <mat-icon>undo</mat-icon>
        <span class="size-xl"></span></button>
      <button mat-button type="submit" class="size-xs transparentButton">
        <mat-icon>save</mat-icon>
        <span class="size-xl"></span></button>
    </div>
    <div class="div--font div--maxwith500 div--margins">
      <section class="section">
        <mat-form-field class="full-width">
          <input matInput placeholder="Name" name="name" required
                 #subgroupnameControl="ngModel" [ngModel]="subgroupname">
          <mat-hint *ngIf="!subgroupnameControl.valid" [ngStyle]="{'color': 'red'}" align="start">erforderlich
          </mat-hint>
        </mat-form-field>
      </section>
    </div>
    <div class="button-row size-xl">
      <span class="fill-remaining-space"></span>
      <button mat-button class="grayButton" (click)="cancel()">
        <mat-icon>undo</mat-icon>
        Abbrechen
      </button>
      <button mat-button type="submit" [disabled]="!f.valid" class="grayButton">
        <mat-icon>save</mat-icon>
        Speichern
      </button>
    </div>
  </form>
</div>
